---
layout: post
title:  Python 二分
categories: Interview
---

## General Template
If target is in nums, then if will be in one of the two. When while loops ends, then `l==r+1`
```py
class BinarySearch(self,nums:List[int],target:int) -> int:
    l,r = 0,len(nums)-1
    
    while l+1 < r:
        mid = (l+r)//2
        if nums[mid] < target:
            l = mid
        else:
            r = mid
    if(nums[l] == target):
        return nums[l]
    else:
        return nums[r] 
```

For duplicate array, find the first postion target appears. To find the first location, we can shrinking the right when `nums[mid]==target`.
```py
class BinarySearch(self,nums:List[int],target:int) -> int:
    l,r = 0,len(nums)-1
    while l+1 < r:
        mid = (l+r)//2
        if nums[mid] == target:
            r = mid
        elif nums[mid] > target:
            right = mid-1
        else:
            left = mid+1
        if nums[l] == target: return r
        if nums[r] == target: return l
        return -1
```
For duplicate array, find the last postion target appears.
```py
class BinarySearch(self,nums:List[int],target:int) -> int:
    l,r = 0,len(nums)-1
    while l+1 < r:
        mid = (l+r)//2
        if nums[mid] == target:
            l = mid
        elif nums[mid] > target:
            right = mid-1
        else:
            left = mid+1
        if nums[r] == target: return r
        if nums[l] == target: return l
        return -1
```

####  How to find the proper place to insert into an array?
The first number smaller than k: shrinking the right side, `if nums[mid]>target, right = mid-1`,so we can find the first number smaller than k

The first number larger than k: shrinking the left side, `if nums[mid]<target,left=mid+1`

## 278. First Bad Version
```py
class Solution:
    def searchInsert(self, nums: List[int], target: int) -> int:
        l,r = 0,len(nums)-1
        while l <= r:
            mid = (l+r)//2
            if nums[mid] == target:
                return mid
            elif nums[mid] > target:
                r = mid-1
            else:
                l = mid+1
        return l
```

## 35. Search Insert Position
```
class Solution:
    def searchInsert(self, nums: List[int], target: int) -> int:
        l,r = 0,len(nums)-1
        # first number equals target
        while l+1 < r:
            mid = (l+r)//2
            if nums[mid] == target:
                r = mid
            elif nums[mid] > target:
                r = mid-1
            else:
                l = mid
        if nums[l] >= target:
            return l
        if nums[r] < target:
            return r+1
        return r
                
```

## 33. Search in Rotated Sorted Array


https://leetcode.com/problems/search-in-rotated-sorted-array/    